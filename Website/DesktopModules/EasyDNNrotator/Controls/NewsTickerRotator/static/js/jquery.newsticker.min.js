(function(e){void 0===e.fn.on&&(e.fn.on=function(a,b){this.bind(a,b)});void 0===e.fn.off&&(e.fn.off=function(a,b){return this.unbind(a,b)});e.fn.newsticker=function(a){var b=this;b.methods=e.fn.newsticker.methods;b.api=e.fn.newsticker.api;b.delegate=e.fn.newsticker.delegate;b.settings=e.extend({},e.fn.newsticker.defaults,a);return this.each(function(){b.api("init",e(this))})};e.fn.newsticker.defaults={style:"scroll",themeClass:"",showControls:!0,tickerTitle:"",feedItems:10,feeds:"",feedFormat:"%title% posted by %author%, %timeago%",
noCache:!1,twitter:"",twitterFormat:'%excerpt% posted on <a href="%link%">Twitter</a> %timeago%',twitterCount:"",parseTwitterLinks:!0,openLinksInNewWindow:!1,facebook:"",facebookFormat:'%excerpt%... Posted on <a href="%link%">Facebook</a> %timeago%',facebookCount:"",lastfm:"",lastfmFormat:'<a href="%link%">%title%</a> listened to %timeago%',lastfmCount:"",tumblr:"",tumblrFormat:'<a href="%link%">%title%</a> posted by %author%, %timeago%',tumblrCount:"",pinterest:"",pinterestFormat:'<a href="%item_link%">%excerpt%</a> pinned %timeago%',
pinterestCount:"",excerptLength:100,sortBy:"timestamp",reverseOrder:!1,autoStart:!0,timeAgoFormat:function(a){return e.fn.newsticker.methods.getTimeAgo(a)},dateFormat:function(a){return e.fn.newsticker.methods.getFormattedDate(a)}};e.fn.newsticker.delegate=function(a){var b=this.style[a],c=Array.prototype.slice.call(arguments,1);return"function"===typeof b?b.apply(this,c):!1};e.fn.newsticker.api=function(a){var b=this.methods[a],c=Array.prototype.slice.call(arguments,1);return"function"===typeof b?
b.apply(this,c):!1};e.fn.newsticker.methods={getId:function(){return(new Date).getTime()},init:function(a){a.css("display","");"object"===typeof e.fn.newsticker.styles[this.settings.style]?(this.style=e.fn.newsticker.styles[this.settings.style],this.settings=e.extend(this.delegate("settings"),this.settings),this.delegate("init"),this.dom={},this.dom.list=a,this.api("getFeeds"),0===this.feeds.length&&0===this.settings.twitter.length&&0===this.settings.facebook.length&&0===this.settings.lastfm.length&&
0===this.settings.tumblr.length&&0===this.settings.pinterest.length&&(this.dom.items=this.dom.list.children("li"),this.api("startup"))):console.log("ERROR: Invalid display style.")},startup:function(){var a=this,b=this.dom,c=this.settings,d=b.list;d.wrap('<div class="newsticker_wrapper newsticker_style_'+c.style+" "+c.themeClass+'" id="newsticker_'+this.api("getId")+'" style="position: relative; z-index: 150; overflow: hidden; "></div>');0<c.tickerTitle.length&&e('<div class="newsticker_title"><h4>'+
c.tickerTitle+"</h4></div>").insertBefore(d);b.wrapper=d.parent();b.title=b.wrapper.children(".newsticker_title");if(!0===c.showControls){var f;e('<ul class="newsticker_controls">\t\t\t\t\t<li class="previous"></li>\t\t\t\t\t<li class="'+(!1===c.autoStart?"resume":"pause")+'"></li>\t\t\t\t\t<li class="next"></li>\t\t\t\t  </ul>').insertAfter(d);f=d.next(".newsticker_controls");f.children(".previous").on("click",function(){a.delegate("previous")});f.children(".pause").on("click",function(){a.delegate("pause")});
f.children(".resume").on("click",function(){a.delegate("resume")});f.children(".next").on("click",function(){a.delegate("next")})}b.controls=void 0===f?b.wrapper.children(".newsticker_controls"):f;!0===c.pauseOnHover&&(b.items.on("mouseover",function(){a.delegate("pause")}),b.items.on("mouseout",function(){a.delegate("resume")}));e(window).resize(function(){a.api("resize")});this.delegate("manipulateDom");this.delegate("itemLoop");this.delegate("start")},getFeeds:function(){var a=this,b=a.settings,
c=b.feedItems,d,f;a.feeds=[];if(0<b.feeds.length)for(var h="string"===typeof b.feeds?[b.feeds]:b.feeds,g=0,l=h.length;g<l;g+=1)d=h[g],f="string"===typeof d?d:d.url,d=d.hasOwnProperty("count")?d.count:c,a.feeds.push({type:"feed",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+parseInt(d)+"&callback=?&q="+encodeURIComponent(f),count:d});0<b.twitter.length&&(d=0<b.twitterCount?b.twitterCount:c,a.feeds.push({type:"twitter",url:"http://api.twitter.com/1/statuses/user_timeline.json?screen_name="+
encodeURIComponent(b.twitter)+"&callback=?&include_entities=1&count="+parseInt(d),count:d}));0<b.lastfm.length&&(d=0<b.lastfmCount?b.lastfmCount:c,f="http://ws.audioscrobbler.com/1.0/user/"+b.lastfm+"/recenttracks.rss",a.feeds.push({type:"lastfm",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+parseInt(d)+"&callback=?&q="+encodeURIComponent(f),count:d}));0<b.tumblr.length&&(d=0<b.tumblrCount?b.tumblrCount:c,f="http://"+b.tumblr+".tumblr.com/rss",a.feeds.push({type:"tumblr",
url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+parseInt(d)+"&callback=?&q="+encodeURIComponent(f),count:d}));0<b.pinterest.length&&(d=0<b.pinterestCount?b.pinterestCount:c,f="http://pinterest.com/"+b.pinterest+"/feed.rss",a.feeds.push({type:"pinterest",url:document.location.protocol+"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+parseInt(d)+"&callback=?&q="+encodeURIComponent(f),count:d}));if(0<b.facebook.length){var k;e.ajax({url:document.location.protocol+
"//graph.facebook.com/"+b.facebook,dataType:"jsonp",success:function(a){k=a},error:function(a,b,c){console.log("An error occurred while trying to fetch this profile from Facebook");k="error"},complete:function(){"error"!==k&&a.api("completeFacebookRequest",k)}})}else a.api("getFeedItems")},completeFacebookRequest:function(a){var b=this.settings,b=0<b.facebookCount?b.facebookCount:b.feedItems,c="https://www.facebook.com/feeds/page.php?id="+a.id+"&format=rss20";this.feeds.push({type:"facebook",url:document.location.protocol+
"//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+parseInt(b)+"&callback=?&q="+encodeURIComponent(c),count:b,data:a});this.api("getFeedItems")},addItems:function(a,b,c){b=this.api("getItemsFromResponse",b,c);for(var d=b.length,f=0;f<d;f+=1){var e=b[f];e.timestamp=this.api("getTimestamp",e,c);a.push(e)}return a},getItemsFromResponse:function(a,b){switch(b){case "twitter":return a;default:return a.responseData.feed.entries}},getTimestamp:function(a,b){switch(b){case "twitter":var c=a.created_at.split(" ");
return new Date(Date.parse(c[1]+" "+c[2]+", "+c[5]+" "+c[3]+" UTC"));default:return new Date(a.publishedDate)}},getFeedItems:function(){for(var a=this,b=[],c=this.feeds,d=0,f,h,g,l=0,k=c.length;l<k;l+=1){f=c[l];h=f.type;g=f.url;if(!0===a.settings.noCache){var m=(new Date).getTime();g+="&"+m}e.ajax({url:g,dataType:"json",success:function(c){"feed"===h&&200!==c.responseStatus?console.log("Unable to load feed"):a.api("addItems",b,c,h)},error:function(a,b,c){console.log("An error occurred while trying to fetch feed from "+
f.url+". Status: "+b)},complete:function(){d+=1;d===k&&a.api("completeFeedItemsRequest",b,h)}})}},completeFeedItemsRequest:function(a,b){var c,d=this.settings,f=a.length>d.feedItems?d.feedItems:a.length,e=this.dom.list;c=d.sortBy;d=d.reverseOrder;"random"===c?a=this.api("randomize",a):a.sort(this.api("sortBy",c,d));for(c=0;c<f;c+=1)d=this.api("displayFeedItem",a[c],b),e.append(d);this.dom.items=e.children("li");this.api("startup")},sortBy:function(a,b){return function(c,d){var f=c[a],e=d[a];return(f<
e?-1:f>e?1:0)*[-1,1][+!!b]}},randomize:function(a){var b,c,d=a.length;if(d)for(;--d;)c=Math.floor(Math.random()*(d+1)),b=a[c],a[c]=a[d],a[d]=b;return a},getFormat:function(a){var b=this.settings;switch(a){case "facebook":return 0<b.facebookFormat.length?b.facebookFormat:b.feedFormat;case "twitter":return 0<b.twitterFormat.length?b.twitterFormat:b.feedFormat;case "lastfm":return 0<b.lastfmFormat.length?b.lastfmFormat:b.feedFormat;case "tumblr":return 0<b.tumblrFormat.length?b.tumblrFormat:b.feedFormat;
case "pinterest":return 0<b.pinterestFormat.length?b.pinterestFormat:b.feedFormat;default:return b.feedFormat}},displayFeedItem:function(a,b){for(var c=this.api("getFormat",b),d="author excerpt link item_link title timeago date".split(" "),f,e,g=0;g<d.length;g+=1)switch(e=d[g],f="timeago"===e?this.settings.timeAgoFormat(a.timestamp):"date"===e?this.settings.dateFormat.apply(this,[a.timestamp]):this.api("getReplacement",a,e,b),e){case "author":c=c.replace(/\%author\%/g,f);break;case "excerpt":c=c.replace(/\%excerpt\%/g,
f);break;case "link":c=c.replace(/\%link\%/g,f);break;case "item_link":c=c.replace(/\%item_link\%/g,f);break;case "title":c=c.replace(/\%title\%/g,f);break;case "timeago":c=c.replace(/\%timeago\%/g,f);break;case "date":c=c.replace(/\%date\%/g,f)}return"<li>"+c+"</li>"},getReplacement:function(a,b,c){switch(b){case "author":switch(c){case "twitter":return a.user.name;default:return a.author}case "excerpt":switch(c){case "twitter":return this.api("getTwitterText",a,this.settings.parseTwitterLinks);
case "facebook":return b=e(a.content).text(),""===b?a.contentSnippet.length>this.settings.excerptLength?a.contentSnippet.slice(0,this.settings.excerptLength):a.contentSnippet:b;case "lastfm":return a.title;default:return a.contentSnippet.length>this.settings.excerptLength?a.contentSnippet.slice(0,this.settings.excerptLength):a.contentSnippet}case "link":switch(c){case "twitter":return"https://twitter.com/#!/"+a.user.screen_name;case "facebook":return"http://facebook.com/"+this.settings.facebook;case "pinterest":return"http://pinterest.com/"+
this.settings.pinterest+"/";default:return a.link}case "item_link":switch(c){case "twitter":return"https://twitter.com/#!/"+a.user.name+"/statuses/"+a.id_str;case "lastfm":return a.content;default:return a.link}case "title":switch(c){case "twitter":return"";default:return a.title}}},getTwitterText:function(a,b){var c=a.text,d=[],f,c=c.length>this.settings.excerptLength?c.slice(0,this.settings.excerptLength):c;if(!1===b)return c;jQuery.each(a.entities,function(a,b){for(var c=0,e=b.length;c<e;c+=1)f=
b[c],f.type=a,f.start=f.indices[0],d.push(f)});d.sort(this.api("sortBy","start",!1));for(var e=0,g=d.length;e<g;e+=1)c=this.api("parseTwitterLink",c,d[e]);return c},parseTwitterLink:function(a,b){var c=b.start,d=b.indices[1],e;c<this.settings.excerptLength&&(e=this.api("getTwitterLink",b),a=a.slice(0,c)+e+a.slice(d));return a},getTwitterLink:function(a){var b=!0===this.settings.openLinksInNewWindow?'target="_blank"':"";switch(a.type){case "urls":return'<a href="'+a.url+'" '+b+">"+a.display_url+"</a>";
case "user_mentions":return'<a href="https://twitter.com/#!/'+a.screen_name+'" '+b+">@"+a.screen_name+"</a>";case "hashtags":return'<a href="https://twitter.com/#!/search/'+a.text+'" '+b+">#"+a.text+"</a>"}},getTimeAgo:function(a){a=(new Date).getTime()-a.getTime();36E5>a?(a=Math.ceil(a/6E4),a=1<a?a+" minutes ago":a+" minute ago"):864E5>a?(a=Math.ceil(a/36E5),a=1<a?a+" hours ago":a+" hour ago"):(a=Math.ceil(a/864E5),a=1<a?a+" days ago":a+" day ago");return a},getFormattedDate:function(a){a=new Date(a);
return a.getDate()+" "+"January February March April May June July August September October November December".split(" ")[a.getMonth()]},getListWidth:function(){return this.settings.showControls?this.dom.controls.position().left-this.dom.title.outerWidth(!0):this.dom.wrapper.width()-this.dom.title.outerWidth(!0)-1},pause:function(){if(!0===this.settings.showControls){var a=this;this.dom.controls.children(".pause").removeClass("pause").addClass("resume").off("click",function(){a.delegate("pause")}).on("click",
function(){a.delegate("resume")})}},resume:function(){if(!0===this.settings.showControls){var a=this;this.dom.controls.children(".resume").removeClass("resume").addClass("pause").off("click",function(){a.delegate("resume")}).on("click",function(){a.delegate("pause")})}},resize:function(){!1===this.delegate("resize")&&this.dom.list.width(this.api("getListWidth"))}};e.fn.newsticker.styles={fade:{settings:function(){return{fadeOutSpeed:"slow",fadeInSpeed:"slow",transitionSpeed:4E3,pauseOnHover:!0}},
manipulateItem:function(a,b){a.css({position:"absolute",left:0,top:0});b?a.addClass("display"):a.hide()},manipulateDom:function(){this.dom.wrapper.css({width:"100%"});this.dom.title.css({"float":"left",margin:0});this.dom.list.css({"float":"left",width:this.api("getListWidth")+"px",position:"relative","list-style":"none"})},itemLoop:function(){var a=!0,b=this;this.dom.items.each(function(){b.delegate("manipulateItem",e(this),a);a=!1})},adjacentItem:function(a){var b=this;this.dom.items.each(function(){e(this).hasClass("display")&&
b.delegate("itemTransform",e(this),a)})},itemTransform:function(a,b){this.delegate("itemFadeOut",a);"next"===b?a.is("li:last-child")?this.delegate("itemFadeIn",this.dom.items.first()):this.delegate("itemFadeIn",a.next()):"previous"===b&&(a.is("li:first-child")?this.delegate("itemFadeIn",this.dom.items.last()):this.delegate("itemFadeIn",a.prev()))},itemFadeIn:function(a){a.fadeIn(this.settings.fadeInSpeed,function(){a.addClass("display")})},itemFadeOut:function(a){a.fadeOut(this.settings.fadeOutSpeed,
function(){a.removeClass("display")})},start:function(){var a=this;this.animationId=window.setInterval(function(){a.delegate("adjacentItem","next")},this.settings.transitionSpeed)},pause:function(){clearInterval(this.animationId);this.api("pause");return this},resume:function(){this.delegate("start");this.api("resume");return this},next:function(){this.delegate("pause").delegate("adjacentItem","next");return this},previous:function(){this.delegate("pause").delegate("adjacentItem","previous");return this}},
reveal:{init:function(){this.progress={animate:!0,original:{},span:{},text:"",html:"",length:0,i:0,j:0,k:0,elements:{},nextHtml:{},nextHtmlIndex:[],nextHtmlContent:""}},settings:function(){return{letterRevealSpeed:70,transitionSpeed:2E3,pauseOnHover:!1}},getLength:function(){var a=this.progress;0===a.length&&(a.length=a.text.length);return a.text.length},resetTicker:function(a){var b=this.progress;b.span=a.span;b.elements=a.elements;b.text=a.text;b.html=a.html;b.length=0;b.j=0;this.delegate("getNextHtml");
b.i=0},getNextHtml:function(){var a=this.progress;a.elements.length<=a.j?(a.nextHtml={},a.nextHtmlIndex=[-1]):(a.nextHtml=a.elements[a.j],a.nextHtmlIndex=a.nextHtml.indeces,a.nextHtmlContent=e(a.nextHtml).text(),a.k=0)},increment:function(){var a=this,b=a.progress;b.nextHtmlIndex.start===b.i?(clearInterval(this.animationId),this.animationId=window.setInterval(function(){a.delegate("incrementHtml")},a.settings.letterRevealSpeed)):(b.span.html(b.text.slice(0,b.i)),b.i+=1)},incrementHtml:function(){var a=
this,b=a.progress,c=e(a.delegate("getOuterHtml",e(b.nextHtml))),d;b.k+=1;d=b.nextHtmlContent.slice(0,b.k);c=e(a.delegate("getOuterHtml",c.children().text(d)));b.span.html(b.text.slice(0,b.i)+c.html());b.k===b.nextHtmlIndex.length&&(b.i+=b.nextHtmlIndex.element.html().length,clearInterval(this.animationId),b.j+=1,a.delegate("getNextHtml"),this.animationId=window.setInterval(function(){a.delegate("revealLetter")},a.settings.letterRevealSpeed))},revealAll:function(){var a=this.progress;a.span.html(a.html);
a.i=this.delegate("getLength")},manipulateDom:function(){var a=this.dom,b=a.list;a.wrapper.css({width:"100%"});a.title.css({"float":"left",overflow:"hidden"});b.css({"float":"left",position:"relative","list-style":"none",margin:0,padding:0});b.width(this.api("getListWidth")+"px")},pause:function(){this.delegate("stopAnimation");this.delegate("revealAll");this.api("pause");return this},resume:function(){var a=this;a.progress.animate=!0;this.animationId=window.setTimeout(function(){a.delegate("adjacentItem",
"next")},50);a.api("resume");return a},adjacent:function(a){this.delegate("stopAnimation");this.api("pause");this.delegate("adjacentItem",a);this.delegate("revealAll");return this},previous:function(){return this.delegate("adjacent","previous")},next:function(){return this.delegate("adjacent","next")},stopAnimation:function(){clearInterval(this.animationId);this.progress.animate=!1},manipulateItem:function(a,b){a.css({position:"absolute",left:0,top:0,"z-index":1}).wrapInner('<span class="original_text" />');
a.children("span").css({opacity:0,display:"block",position:"relative","z-index":4});b&&a.addClass("revealing")},itemLoop:function(){var a=!0,b=this;b.dom.items.each(function(){b.delegate("manipulateItem",e(this),a);a=!1})},prepareItem:function(){var a=this.dom.list.find(".revealing"),b=this.progress,c,d;0===a.children(".revealing_text").length&&a.append('<span class="revealing_text" />').children(".revealing_text").css({opacity:1,position:"absolute",left:0,top:0});a.css({"z-index":2});c=a.children(".original_text");
d=this.delegate("decodeHtml",c.html());this.delegate("resetTicker",{span:a.children(".revealing_text"),text:d,html:c.html(),elements:this.delegate("getElements",c,d)});!0===b.animate&&this.delegate("animate")},getElements:function(a,b){var c=this,d=a.children();d.each(function(b,h){d[b].indeces=c.delegate("getElement",e(h),a.html())});return d},getElement:function(a,b){var c=this.delegate("getOuterHtml",a),d=b.indexOf(c.html()),e=a.text().length;return{start:d,length:e,element:c}},decodeHtml:function(a){a=
a.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,"");return a=e("<div/>").html(a).html()},getOuterHtml:function(a){return a.clone().wrap("<p>").parent()},animate:function(){var a=this;this.animationId=window.setInterval(function(){a.delegate("revealLetter")},a.settings.letterRevealSpeed)},revealLetter:function(){var a=this,b=a.progress;a.delegate("increment");b.i>a.delegate("getLength")&&(clearInterval(this.animationId),this.animationId=window.setTimeout(function(){a.delegate("adjacentItem","next")},
a.settings.transitionSpeed))},adjacentItem:function(a){var b=this.dom,c=b.list.find(".revealing").removeClass("revealing");this.delegate("previous"===a?"getPreviousItem":"getNextItem",b,c).addClass("revealing");c.css({"z-index":1}).children(".revealing_text").text("");this.delegate("prepareItem")},getNextItem:function(a,b){return b.is("li:last-child")?a.list.find("li:first-child"):b.next()},getPreviousItem:function(a,b){return b.is("li:first-child")?a.list.find("li:last-child"):b.prev()},start:function(){!0===
this.settings.autoStart&&this.delegate("prepareItem")}},scroll:{init:function(){this.progress={autoScroll:this.settings.autoStart,left:0,boundary:0,last:{},current:{},animationId:0}},resetLeft:function(){this.progress.left=parseInt(this.dom.list.css("left"))},settings:function(){return{scrollSpeed:50,slideSpeed:1E3,slideEasing:"swing",pauseOnHover:!0}},manipulateDom:function(a){var b=this.dom;a="undefined"===typeof a?!1:a;!1===a?(b.wrapper.css({width:"10000px",position:"relative"}),b.title.css({"float":"left"}),
b.list.wrap('<div class="newsticker_scroller" />').css({position:"absolute",left:10}),b.scroller=this.dom.wrapper.children(".newsticker_scroller")):!0===a&&(b.wrapper.css({width:"100%"}),b.scroller.css({position:"absolute",height:"100%",overflow:"hidden",width:this.api("getListWidth")+"px",left:b.title.outerWidth(!0)+"px"}))},manipulateItem:function(a,b){var c=a.css({"float":"left"}).outerWidth(!0);a.css({position:"absolute",display:"inline",left:b+"px",width:c+"px"});return b+c},itemLoop:function(){var a=
this,b=0,c=this.progress,d=this.dom;d.items.each(function(){b=a.delegate("manipulateItem",e(this),b)});c.current=d.items.first();c.last=d.items.last();c.boundary=1===d.items.length?c.current.width():c.current.next().position().left;a.delegate("manipulateDom",!0)},start:function(){!0===this.progress.autoScroll&&this.delegate("animate")},animate:function(){var a=this,b=a.progress;!1===b.autoScroll&&(b.autoScroll=!0);b.animationId=window.setInterval(function(){a.delegate("doAnimation")},a.settings.scrollSpeed)},
doAnimation:function(){var a=this.progress;0>a.left+a.boundary&&this.delegate("nextItem");--a.left;this.dom.list.css({left:a.left+"px"})},pause:function(){var a=this.progress;a.autoScroll=!1;clearInterval(a.animationId);this.api("pause");return this},resume:function(){this.delegate("animate");this.api("resume");return this},next:function(){var a=this,b=a.progress,c=a.settings,b=0>b.boundary?b.left-b.current.width():"-"+b.boundary;a.delegate("pause");a.dom.list.animate({left:b+"px"},c.slideSpeed,c.slideEasing,
function(){a.delegate("resetLeft");a.delegate("nextItem")})},resize:function(){this.dom.scroller.width(this.api("getListWidth"))},previous:function(){var a=this,b=a.progress,c=a.settings,d;a.delegate("pause");d=a.delegate("getPrevious");d.css({left:b.current.position().left-parseInt(d.width())});b=0>d.position().left?0-d.position().left:"-"+d.position().left;a.dom.list.animate({left:b+"px"},c.slideSpeed,c.slideEasing,function(){a.delegate("resetLeft");a.delegate("previousItem",d)})},nextItem:function(){var a=
this.progress,b=this.dom,c=b.items.last(),b=b.items.first(),d=a.last.outerWidth()+a.last.position().left,e=a.current;e.css({left:d+"px"});0===e.next().length?(a.current=b,a.last=c):(a.current=e.next(),a.last=a.current.prev());0===a.current.next().length?a.boundary=b.position().left:a.boundary=a.current.next().position().left},getPrevious:function(){var a=this.progress;return 0===a.current.prev().length?this.dom.items.last():a.current.prev()},previousItem:function(a){var b=this.progress,c=this.dom;
b.current=a;0===b.current.prev().length?b.last=c.items.last():b.last=b.current.prev();0===b.current.next().length?b.boundary=c.items.first().position().left:b.boundary=b.current.next().position().left}}}})(jQuery);