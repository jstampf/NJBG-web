(function(h){var E=function(k,q){var c=h.extend({},h.fn.PokerCarousel.defaults,q),A=this,k=h(k),i=k.children(".slides");i.children("div").addClass("slideItem");var l=i.children(".slideItem"),B=l.find("img"),e=0,j=0,f=l.length,u=!1,v=!0;videos={youtube:{reg:/youtube\.com\/watch/i,split:"=",index:1,url:"http://www.youtube.com/embed/%id%?autoplay=1&amp;fs=1&amp;rel=0"},vimeo:{reg:/vimeo\.com/i,split:"/",index:3,url:"http://player.vimeo.com/video/%id%?portrait=0&amp;autoplay=1"}};this.current=e;this.length=
f;this.init=function(){var a;i.css({width:c.carouselWidth+"px",height:c.carouselHeight+"px"}).bind("mouseover",E).bind("mouseout",L);k.css({width:c.carouselWidth});for(var b=0;b<f;b++)a=l.eq(b),a.css(w(p(b))).bind("click",M),l.eq(p(b)).css({"z-index":F(b)}),B.eq(b).css(g(p(b))),0==a.css("opacity")?a.hide():a.show();G(0);!0==c.mouse&&i.mousewheel(function(a,b){if(0<b)return m(e-1,!0,!1),!1;if(0>b)return m(e+1,!0,!1),!1});if(!0==c.directionNav){var d;k.append('<div class="nextButton"></div><div class="prevButton"></div>');
a=k.find("> .nextButton");b=k.find("> .prevButton");d=Math.ceil((c.frontHeight-a.height())/2);a.css({top:d,visibility:"visible"}).bind("click",function(){m(e+1,!0,!1)});b.css({top:d,visibility:"visible"}).bind("click",function(){m(e-1,!0,!1)})}if("none"!=c.buttonNav){d=k;b="bullet";a="bulletActive";"numbers"==c.buttonNav&&(b="numbers",a="numberActive");d.append('<div class="buttonNav"></div>');d=d.children(".buttonNav");for(var C=0;C<f;C++){var j="";"numbers"==b&&(j=C+1);h('<div class="'+b+'">'+j+
"</div>").css({"text-align":"center"}).bind("click",function(){m(h(this).index(),true,false)}).appendTo(d)}b=d.children("."+b);b.eq(0).addClass(a);d.css({width:f*b.outerWidth(!0),height:b.outerHeight(!0)})}if(!0==c.reflection){a=c.reflectionOpacity;b="rgba("+c.reflectionColor+","+a+")";d="rgba("+c.reflectionColor+",1)";h('<style type="text/css">.slideItem .gradient {position:absolute; left:0; top:0; margin:0; padding:0; border:none; width:100%; height:100%; '+("background: -moz-linear-gradient("+
b+","+d+"); ")+("background: -o-linear-gradient("+b+","+d+"); ")+("background: -webkit-linear-gradient("+b+","+d+"); ")+("background: -webkit-gradient(linear, 0% 0%, 0% 100%, from("+b+"), to("+d+")); ")+("background: linear-gradient("+b+","+d+"); ")+"} .slideItem .reflection {"+("filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+100*a+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)")+("-ms-filter: progid:DXImageTransform.Microsoft.Alpha(style=1,opacity="+100*a+",finishOpacity=0,startX=0,finishX=0,startY=0,finishY=100)")+
"}</style>").appendTo("head");for(a=0;a<f;a++)b=B.eq(a).attr("src"),d=g(a),h('<div class="reflection"></div>').css({position:"absolute",margin:"0",padding:"0",border:"none",overflow:"hidden",left:"0",top:g(a).height+"px",width:"100%",height:r(a)}).appendTo(l.eq(a)).append(h('<img src="'+b+'" />').css({width:d.width+"px",height:d.height+"px",left:"0",margin:"0",padding:"0",border:"none","-moz-transform":"rotate(180deg) scale(-1,1)","-webkit-transform":"rotate(180deg) scale(-1,1)","-o-transform":"rotate(180deg) scale(-1,1)",
transform:"rotate(180deg) scale(-1,1)",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"})).append('<div class="gradient"></div>')}if(!0==c.shadow){a=g(0).width;"center"!=c.hAlign&&(a=g(f-1).width);for(b=0;b<f;b++)d=l.eq(b),h('<div class="jShadow"></div>').css({width:a+"px","z-index":"-1",position:"absolute",margin:"0",padding:"0",border:"none",overflow:"hidden",left:"0",bottom:"0"}).append('<div class="shadowLeft"></div><div class="shadowMiddle"></div><div class="shadowRight"></div>').appendTo(d).children("div").css({position:"relative",
"float":"left"}),d.find(".jShadow").children(".shadowMiddle").width(H(b))}!0==c.autoplay&&D();a=g(0);h('<div class="spinner"></div>').hide().css(w(0)).css({width:a.width+"px",height:a.height+"px","z-index":f+3,position:"absolute",cursor:"pointer",overflow:"hidden",padding:"0",margin:"0",border:"none"}).appendTo(i);a=g(0);h('<div class="videoOverlay"></div>').hide().css(w(0)).css({width:a.width+"px",height:a.height+"px","z-index":f+2,position:"absolute",cursor:"pointer",overflow:"hidden",padding:"0",
margin:"0",border:"none"}).bind("click",N).appendTo(i);I(e)};var g=function(a){var b=c.frontWidth,d=c.frontHeight;0!=a&&("center"==c.hAlign?0<a&&a<=Math.ceil((f-1)/2)?(a=g(a-1),b=c.backZoom*a.width,d=c.backZoom*a.height):(a=g(f-a),b=a.width,d=a.height):a==f-1?(b=c.frontWidth/c.backZoom,d=c.frontHeight/c.backZoom):(a=g(a-1),b=c.backZoom*a.width,d=c.backZoom*a.height));return{width:b,height:d}},n=function(a){var b=c.frontWidth,d=c.frontHeight+r(a)+x(a);0!=a&&("center"==c.hAlign?0<a&&a<=Math.ceil((f-
1)/2)?(d=g(a-1),b=c.backZoom*d.width,d=c.backZoom*d.height+r(a)+x(a)):(a=n(f-a),b=a.width,d=a.height):a==f-1?(b=c.frontWidth/c.backZoom,d=c.frontHeight/c.backZoom+r(a)+x(a)):(d=g(a-1),b=c.backZoom*d.width,d=c.backZoom*d.height+r(a)+x(a)));return{width:b,height:d}},J=function(a){a=g(a);return{vMargin:a.height*c.vMargin,hMargin:a.width*c.hMargin}},t=function(a){var b=s(a-1)+(g(a-1).height-g(a).height)/2;"center"!=c.hAlign&&a==f-1&&(b=c.top-(g(a).height-g(0).height)/2);return b},s=function(a){var b=
c.top,d=J(a).vMargin;"bottom"==c.vAlign&&(b=c.bottom);0!=a&&(b="center"==c.hAlign?0<a&&a<=Math.ceil((f-1)/2)?"center"==c.vAlign?t(a):t(a)+d:s(f-a):a==f-1?"center"==c.vAlign?t(a):t(a)-d:"center"==c.vAlign?t(a):t(a)+d);return b},o=function(a){var b,d=f%2,e=f/2;b=J(a).hMargin;0==a?"center"==c.hAlign?b=(c.carouselWidth-c.frontWidth)/2:(b=c.left,"right"==c.hAlign&&(b=c.right)):"center"==c.hAlign?0<a&&a<=Math.ceil((f-1)/2)?(b=o(a-1)-b,0==d&&a==e&&(b=(c.carouselWidth-n(a).width)/2)):b=c.carouselWidth-o(f-
a)-n(a).width:b=a==f-1?o(0)-(n(a).width-n(0).width)/2-b:o(a-1)+(n(a-1).width-n(a).width)/2+b;return b},y=function(a){var b=1,d=f-c.slidesPerScroll;2>d&&(d=0);if("center"==c.hAlign){var e=(f-1)/2,d=d/2;0==a?b=1:(b=c.backOpacity,a>=e+1-d&&a<=e+d&&(b=0))}else 0==a?b=1:(b=c.backOpacity,a<f-d||(b=0));return b},w=function(a){for(var b=[],d=0;d<f;d++){var e=n(d);"left"==c.hAlign?(b[d]={width:e.width,height:e.height,top:s(d),left:o(d),opacity:y(d)},"bottom"==c.vAlign&&(b[d]={width:e.width,height:e.height,
bottom:s(d),left:o(d),opacity:y(d)})):(b[d]={width:e.width,height:e.height,top:s(d),right:o(d),opacity:y(d)},"bottom"==c.vAlign&&(b[d]={width:e.width,height:e.height,bottom:s(d),right:o(d),opacity:y(d)}))}return b[a]},p=function(a){var b=e,c=a-b;a<b&&(c+=f);return c},F=function(a){var b=c.hAlign;return"left"==b||"right"==b?a==f-1?f-1:f-(2+a):0<=a&&a<=(f-1)/2?f-1-a:a-1},E=function(){!0==c.autoplay&&!0==c.pauseOnHover&&z()},L=function(){!0==c.autoplay&&!0==c.pauseOnHover&&!0==v&&D()},m=function(a,b,
d){!0!=u&&(!0==b&&z(),j=a,j==f&&(j=0),-1==j&&(j=f-1),c.before(A),K(),v=d)},K=function(){if(!0!=u)if(e==j)u=!1;else{u=!0;l.eq(e).find("> .description").css("display","none");if(e>j)var a=f-e+j,b=e-j;else a=j-e,b=e+f-j;dir=a>b?-1:1;e+=dir;e==f&&(e=0);-1==e&&(e=f-1);i.children(".videoOverlay").hide().children().remove();i.children(".spinner").hide();a=k.children(".buttonNav");"numbers"==c.buttonNav?(a=a.children(".numbers"),a.removeClass("numberActive"),a.eq(e).addClass("numberActive")):(a=a.children(".bullet"),
a.removeClass("bulletActive"),a.eq(e).addClass("bulletActive"));for(a=0;a<f;a++)O(a)}},O=function(a){var b=l.eq(a),d=p(a);b.show();b.animate(w(d),c.speed,"linear",function(){G(e);var b=h(this);0==b.css("opacity")&&b.hide();a==f-1&&(u=!1,e!=j?K():(A.current=e,I(e),c.after(A)))});b.css({"z-index":F(d)});B.eq(a).animate(g(d),c.speed,"linear");if(!0==c.reflection){var d=b.children(".reflection"),i=c.speed,k=g(p(a));d.animate({top:k.height+"px",height:r(p(a))},i,"linear");d.children("img").animate(k,i,
"linear")}!0==c.shadow&&b.find(".jShadow").children(".shadowMiddle").animate({width:H(p(a))+"px"},c.speed,"linear")},M=function(){var a=h(this);if(a.index()!=e)return m(a.index(),!0,!1),!1},r=function(a){var b=0;!0==c.reflection&&(b=c.reflectionHeight*g(a).height);return b},x=function(a){var b=0;!0==c.shadow&&(b=0.1*g(a).height);return b},H=function(a){var b=l.eq(a).find(".jShadow"),c=b.children(".shadowLeft"),e=b.children(".shadowRight");b.children(".shadowMiddle");return g(a).width-(c.width()+e.width())},
G=function(a){a=l.eq(a).find("> .description");a.css("display","block");!0!==a.data("positioned")&&(a.data("positioned",!0).css("visibility","hidden"),a.css({top:c.frontHeight-a.height(),visibility:"visible"}))},I=function(a){l.eq(a).children("a").hasClass("video")&&i.children(".videoOverlay").show()},N=function(){var a=i.children(".videoOverlay"),b,d=l.eq(e).children("a").attr("href"),f;h.each(videos,function(a,b){if(d.match(b.reg)){var c=d.split(b.split)[b.index].split("?")[0].split("&")[0];f=b.url.replace("%id%",
c)}});b=f;h("<iframe></iframe>").attr({width:a.width()+"px",height:a.height()+"px",src:b,frameborder:"0"}).bind("load",P).appendTo(a);i.children(".spinner").show();h(this).hide();!0==c.autoplay&&(z(),v=!1)},P=function(){i.children(".videoOverlay").show();i.children(".spinner").hide()},D=function(){intervalProcess=setInterval(function(){m(e+1,!1,!0)},c.autoplayInterval)},z=function(){!0==c.autoplay&&clearInterval(intervalProcess)};this.prev=function(){m(e-1,!0,!1)};this.next=function(){m(e+1,!0,!1)};
this.goTo=function(a){m(a,!0,!1)};this.pause=function(){z();v=!1};this.resume=function(){!0==c.autoplay&&D()}};h.fn.PokerCarousel=function(h){for(var q=[],c=0;c<this.length;c++)this[c].PokerCarousel||(this[c].PokerCarousel=new E(this[c],h),this[c].PokerCarousel.init()),q.push(this[c].PokerCarousel);return 1<q.length?q:q[0]};h.fn.PokerCarousel.defaults={hAlign:"center",vAlign:"center",hMargin:0.4,vMargin:0.2,frontWidth:400,frontHeight:300,carouselWidth:1E3,carouselHeight:360,left:0,right:0,top:0,bottom:0,
backZoom:0.8,slidesPerScroll:5,speed:500,buttonNav:"none",directionNav:!1,autoplay:!0,autoplayInterval:5E3,pauseOnHover:!0,mouse:!0,shadow:!1,reflection:!1,reflectionHeight:0.2,reflectionOpacity:0.5,reflectionColor:"255,255,255",backOpacity:1,before:function(){},after:function(){}}})(jQuery);