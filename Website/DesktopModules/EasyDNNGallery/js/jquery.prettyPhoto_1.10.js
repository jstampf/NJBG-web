/* ------------------------------------------------------------------------
Class: prettyPhoto
Use: Lightbox clone for jQuery
Author: Stephane Caron (http://www.no-margin-for-errors.com)
Version: 3.1.2
------------------------------------------------------------------------- */
!function(){var e=function(e){function t(i,o,p){if(!(i>=100)){var a=-1==p.indexOf("id")?!1:!0;setTimeout(function(){var s;s=a?e("a[rel='"+o+"'][edgpid='"+p.substring(p.indexOf("id")+2,p.length)+"']"):e("a[rel='"+o+"']").eq(p),0!==s.length?s.trigger("click"):t(i+1,o,p)},100)}}function i(){return url=location.href,hashtag=-1!=url.indexOf("#!")?decodeURI(url.substring(url.indexOf("#!")+2,url.length)):!1,hashtag}function o(){"undefined"!=typeof theRel&&(location.hash="!"+theRel+"/"+edgpid+"/")}function p(){-1!=location.href.indexOf("#!")&&(location.hash="")}function a(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",o=new RegExp(i),p=o.exec(t);return null==p?"":p[1]}function s(e,t){var i="",o="",p=t+(arguments.length>2?"="+arguments[2]:"");if(e=e.split("#"),i=1==e.length?!1:e[1],e=e[0].split("?"),1==e.length||""==e[1])o=e[0]+"?"+p;else{o=e[0]+"?";var a=e[1].split("&"),s=!1,n=!1;for(var l in a)"string"==typeof a[l]&&(s=a[l].split("="),s[0]==t?(n=!0,o+=p+"&"):o+=1==s.length?s[0]+"&":s[0]+"="+s[1]+"&");n?o=o.substring(0,o.length-1):o+=p}return o+(i===!1?"":"#"+i)}function n(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}e.prettyPhoto={version:"3.1.2"},e.fn.prettyPhoto=function(l){function r(){e(".pp_loaderIcon").hide();var t=e("#pp_image_download_link"),i=g(pp_images[set_position]);"false"!==settings.download_handler_url&&R&&"image"==i?t.attr("href",R):t.hide(),settings.allow_image_printing&&"image"==i||$pp_pic_holder.find(".pp_image_print_link").hide(),settings.enable_item_emailing||$pp_pic_holder.find(".pp_send_email_link").hide(),projectedTop=scroll_pos.scrollTop+(O/2-y.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:y.contentHeight,width:y.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:S/2-y.containerWidth/2,width:y.containerWidth},settings.animation_speed,function(){if($pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(y.height).width(y.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==g(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),y.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide(),!settings.autoplay_slideshow||I||b||e.prettyPhoto.startSlideshow(),settings.deeplinking&&o(),settings.show_social_sharing){var t=$pp_pic_holder.find("div.pp_social_tools"),i=settings.social_tools;i=i.replace("{facebook_locale}",settings.facebook_locale).replace(/{location_href_encoded}/g,n(H)).replace(/{location_href}/g,H).replace(/{image_location}/g,encodeURIComponent(window.location.protocol+"//"+window.location.host+pp_images[set_position])).replace(/{item_title_encoded}/g,encodeURIComponent(pp_titles[set_position])),t.html(i)}settings.changepicturecallback(),b=!0,isSet&&settings.overlay_gallery&&$pp_gallery_li.find("img").each(function(){var t=e(this),i=t.parent();t.height()<settings.gallery_thumb_dimensions.height?i.height(t.height()).css({marginTop:Math.ceil((settings.gallery_thumb_dimensions.height-t.height())/2)}):(i.css({marginTop:0}),t.css({marginTop:-Math.ceil((t.height()-settings.gallery_thumb_dimensions.height)/2)}))})}),v()}function d(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function _(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function h(e,t){var i,o=!1,p=e,a=t;return c(e,t),(x>S||$>O)&&doresize&&settings.allow_resize&&!C&&(o=!0,imageRation=e/t,i=(S-200)/(O-200),imageRation>i?(p=S-200,a=(S-200)/imageRation):(p=(O-200)*imageRation,a=O-200),$=a,x=p,c(p,a)),{width:Math.floor(p),height:Math.floor(a),containerHeight:Math.floor($),containerWidth:Math.floor(x)+2*settings.horizontal_padding,contentHeight:Math.floor(k),contentWidth:Math.floor(P),resized:o}}function c(t,i){t=parseFloat(t),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),395>t?$pp_details.find(".pp_tools_and_sharing").height(49):$pp_details.find(".pp_tools_and_sharing").height("auto"),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height()+3,detailsHeight=detailsHeight<=34?36:detailsHeight,e.browser.msie&&7==e.browser.version&&(detailsHeight+=8),$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),"top"==settings.item_title_position&&$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),k=i+detailsHeight,P=t,$=k+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),x=t}function g(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/wistia\./i)?"wistia":e.match(/\biframe=true\b/i)?"iframe":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function m(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=u(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=O/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>O)return;$pp_pic_holder.css({top:projectedTop,left:S/2+scroll_pos.scrollLeft-contentwidth/2})}}function u(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function f(){O=e(window).height(),S=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(S)}function v(){isSet&&settings.overlay_gallery&&"image"==g(pp_images[set_position])&&settings.ie6_fallback&&(!e.browser.msie||6!=parseInt(e.browser.version))?($pp_gallery.show(),itemWidth=settings.gallery_thumb_dimensions.width+7,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((y.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show().attr("style","margin-top: "+(settings.gallery_thumb_dimensions.height/2-7)+"px !important"),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css({marginLeft:-(galleryWidth/2+navWidth/2),marginTop:settings.gallery_ontop_item?-(settings.gallery_thumb_dimensions.height+20):10}).css("display","block").find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).height(settings.gallery_thumb_dimensions.height+2).find("li").removeClass("selected").find("a").height(settings.gallery_thumb_dimensions.height),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):($pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave"),"object"==typeof $pp_gallery&&$pp_gallery.hide())}function w(t){if(settings.tools_and_sharing=settings.tools_and_sharing.replace("{download_image_text}",settings.download_image_text).replace("{print_image_text}",settings.print_image_text).replace("{item_emailing_text}",settings.item_emailing_text),settings.markup=settings.markup.replace("{pp_tools_and_sharing}",settings.tools_and_sharing?settings.tools_and_sharing:"").replace("{pp_title_top}","top"==settings.item_title_position?'<div class="ppt">&nbsp;</div>':"").replace("{pp_title_bottom}","bottom"==settings.item_title_position?'<div class="ppt">&nbsp;</div>':""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="",$allItemsInGallery=e('a[rel="'+theRel+'"]');for(var i=0;i<pp_images.length;i++)pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[i]):(classname="default",img_src=$allItemsInGallery.eq(i).find("> img").attr("src")),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='"+settings.gallery_thumb_dimensions.width+"' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),settings.gallery_autohide&&$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").stop().fadeTo(400,1)},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").stop().fadeTo(400,0)}),$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),e("a.pp_expand").bind("click",function(t){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),d(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),m()}l=e.extend({},{animation_speed:"fast",slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!1,overlay_gallery:!0,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,gallery_thumb_dimensions:{width:50,height:33},download_handler_url:"false",download_image_text:"Download image",allow_image_printing:!1,print_image_text:"Print image",show_social_sharing:!1,facebook_locale:"en_US",item_emailing_text:"Email the link",item_emailing_subject:"Look what I've found...",enable_item_emailing:!1,item_title_position:"top",gallery_ontop_item:!0,gallery_autohide:!0,markup:'<div class="pp_pic_holder">{pp_title_top}						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div>{pp_title_bottom}											<p class="pp_description"></p> 											{pp_tools_and_sharing} 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",tools_and_sharing:'<div class="pp_tools_and_sharing">								<a id="pp_image_download_link" class="icon_link pp_image_down_link" href="#" title="{download_image_text}"></a>								<a id="pp_print_image_link" class="icon_link pp_image_print_link" href="#" title="{print_image_text}"></a>								<a id="pp_email_link" class="icon_link pp_send_email_link" href="#" title="{item_emailing_text}"></a>								<div class="pp_social_tools"></div>							</div>',social_tools:'									<a href="//twitter.com/share" class="twitter-share-button" data-url="{location_href}" data-count="horizontal">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>									<iframe src="//www.facebook.com/plugins/like.php?locale={facebook_locale}&href={location_href_encoded}&layout=button_count&show_faces=true&action=like&font&colorscheme=light&height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px; width: 100px;" allowTransparency="true"></iframe>									<g:plusone size="medium" href="{location_href}" annotation="bubble"></g:plusone><script type="text/javascript">gapi.plusone.go();</script>									<a href="//pinterest.com/pin/create/button/?url={location_href_encoded}&media={image_location}&description={item_title_encoded}" class="pin-it-button" count-layout="horizontal" target="_blank"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>'},l);var y,b,k,P,$,x,I,j,T,z=this,C=!1,O=e(window).height(),S=e(window).width(),R="",H="";doresize=!0,scroll_pos=u(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){m(),f()}),l.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){settings=l,"pp_default"==settings.theme&&(settings.horizontal_padding=16),settings.ie6_fallback&&e.browser.msie&&6==parseInt(e.browser.version)&&(settings.theme="light_square");var t=e(this);return theRel=t.attr("rel"),galleryRegExp=/_(?:.*)/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?e.map(z,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(t.attr("href")),pp_titles=isSet?e.map(z,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(t.find("img").attr("alt")),pp_descriptions=isSet?e.map(z,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).attr("pptitle")?e(t).attr("pptitle"):"":void 0}):e.makeArray(t.attr("pptitle")),set_position=e.inArray(t.attr("href"),pp_images),rel_index=isSet?set_position:e("a[rel^='"+theRel+"']").index(t),w(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){m()}),$pp_pic_holder.delegate("#pp_print_image_link","click",function(){return printWindow=window.open("","mywindow","location=1,status=1,scrollbars=1,width=600,height=600"),printWindow.document.write('<div><img alt="" src="'+$pp_pic_holder.find("#fullResImage").attr("src")+'"/></div>'),printWindow.document.close(),printWindow.print(),!1}),$pp_pic_holder.delegate("#pp_email_link","click",function(){return window.location.href="mailto:?subject="+escape(settings.item_emailing_subject)+"&body="+encodeURIComponent(H),!1}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){"undefined"==typeof settings&&(settings=l,e.browser.msie&&6==e.browser.version&&(settings.theme="light_square"),pp_images=e.makeArray(arguments[0]),pp_titles=arguments[1]?e.makeArray(arguments[1]):e.makeArray(""),pp_descriptions=arguments[2]?e.makeArray(arguments[2]):e.makeArray(""),isSet=pp_images.length>1?!0:!1,set_position=0,w(t.target));var i=e('a[rel="'+theRel+'"][href="'+pp_images[set_position]+'"]');R=i.attr("downhref")?i.attr("downhref"):"",H=i.attr("lbnestedurl")?i.attr("lbnestedurl"):location.href;var o=H.substring(0,H.indexOf("#"));return url_rel=theRel.replace("_fullscreen",""),o&&(H=o),j=i.attr("edgpid"),T=i.attr("edgmid"),H=s(H,"edgpid",j)+"#!"+url_rel+"/id"+j+"/",void 0!=T&&(H=s(H,"edgmid",T)),e.browser.msie&&6==e.browser.version&&e("select").css("visibility","hidden"),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),_(e(pp_images).size()),e(".pp_loaderIcon").show(),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(a("width",pp_images[set_position]))?a("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(a("height",pp_images[set_position]))?a("height",pp_images[set_position]):settings.default_height.toString(),C=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),C=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),C=!0),$pp_pic_holder.fadeIn(function(){switch(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,g(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){y=h(imgPreloader.width,imgPreloader.height),r()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":y=h(movie_width,movie_height),movie_id=a("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="//www.youtube.com/embed/"+movie_id,a("rel",pp_images[set_position])?movie+="?rel="+a("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,y.width).replace(/{height}/g,y.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":y=h(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http:\/\/(www\.)?vimeo.com\/(\d+)/,i=movie_id.match(t);movie="//player.vimeo.com/video/"+i[2]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=y.width+"/embed/?moog_width="+y.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,y.height).replace(/{path}/g,movie);break;case"wistia":y=h(movie_width,movie_height),frame_url=pp_images[set_position],toInject=settings.iframe_markup.replace(/{width}/g,y.width).replace(/{height}/g,y.height).replace(/{path}/g,frame_url);break;case"quicktime":y=h(movie_width,movie_height),y.height+=15,y.contentHeight+=15,y.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,y.width).replace(/{height}/g,y.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":y=h(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,y.width).replace(/{height}/g,y.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":y=h(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,y.width).replace(/{height}/g,y.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,y=h(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,r()});break;case"custom":y=h(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,y=h(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,r())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),d(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof I?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),I=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(I),I=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){e.browser.msie&&6==e.browser.version&&e("select").css("visibility","visible"),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),p(),settings.callback(),doresize=!0,b=!1}))};var W,G;return-1==location.search.indexOf("_escaped_fragment_=")?W=i():(W=location.search.substring(location.search.indexOf("_escaped_fragment_=")+19),W=decodeURIComponent(W.substring(0,W.indexOf("&")))),!pp_alreadyInitialized&&W&&(pp_alreadyInitialized=!0,G=W,W=W.substring(W.indexOf("/")+1,W.length-1),G=G.substring(0,G.indexOf("/")),t(0,G,W)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}};"undefined"!=typeof jQuery&&e(jQuery),"undefined"!=typeof eds1_10&&e(eds1_10)}();var pp_alreadyInitialized=!1;